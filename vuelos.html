<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Vuelos | SistemaAéreo</title>
    <!-- En el <head> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="CSS/estilos.css">
</head>
<body class="has-navbar">
    <!-- Menu para poder moverse entre las paginas -->
    <nav class="navbar">
        <a href="index.html" class="navbar-brand">
            <i class="fas fa-plane"></i>
            SistemaAéreo
        </a>
        <ul class="nav-menu">
            <li class="nav-item">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-home"></i>
                    Inicio
                </a>
            </li>
            <li class="nav-item">
                <a href="vuelos.html" class="nav-link active">
                    <i class="fas fa-plane"></i>
                    Vuelos
                </a>
            </li>
            <li class="nav-item">
                <a href="pasajeros.html" class="nav-link">
                    <i class="fas fa-users"></i>
                    Pasajeros
                </a>
            </li>
            <li class="nav-item">
                <a href="aerolineas.html" class="nav-link">
                    <i class="fas fa-headset"></i>
                    Aerolíneas
                </a>
            </li>
            <li class="nav-item">
                <a href="venta_boletos.html" class="nav-link">
                    <i class="fas fa-ticket-alt"></i>
                    Boletos
                </a>
            </li>
        </ul>
    </nav>

    <main>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

        <div class="form-container">
            <h2>Registro de Vuelos</h2>
            <form id="formVuelo">
                <input type="hidden" id="indexEditar">

                <div class="row g-3">
                    <!-- Primera fila: Número, Origen, Destino -->
                    <div class="col-md-4">
                        <input type="text" id="numero" class="form-control" placeholder="Número de vuelo" required>
                    </div>
                    <div class="col-md-4">
                        <input type="text" id="origen" class="form-control" placeholder="Origen" required>
                    </div>
                    <div class="col-md-4">
                        <input type="text" id="destino" class="form-control" placeholder="Destino" required>
                    </div>

                    <!-- Segunda fila: Fecha y hora de salida -->
                    <div class="col-md-6">
                        <label for="fechaSalida" class="form-label">Fecha de Partida</label>
                        <input type="date" id="fechaSalida" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label for="horaSalida" class="form-label">Hora de Partida</label>
                        <input type="time" id="horaSalida" class="form-control" required>
                    </div>

                    <!-- Tercera fila: Fecha y hora de llegada -->
                    <div class="col-md-6">
                        <label for="fechaLlegada" class="form-label">Fecha de Llegada</label>
                        <input type="date" id="fechaLlegada" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label for="horaLlegada" class="form-label">Hora de Llegada</label>
                        <input type="time" id="horaLlegada" class="form-control" required>
                    </div>

                    <!-- Aerolínea como combo box -->
                    <div class="col-md-6">
                        <label for="aerolinea" class="form-label">Aerolínea</label>
                        <select id="aerolinea" class="form-select" required>
                            <option value="">Seleccione una aerolínea</option>
                            <option value="AeroMéxico">AeroMéxico</option>
                            <option value="LATAM">LATAM</option>
                            <option value="Copa Airlines">Copa Airlines</option>
                        </select>
                    </div>

                    <!-- Estado -->
                    <div class="col-md-6">
                        <label for="estado" class="form-label">Estado</label>
                        <select id="estado" class="form-select" required>
                            <option value="">Estado</option>
                            <option value="Programado">Programado</option>
                            <option value="Retrasado">Retrasado</option>
                            <option value="Cancelado">Cancelado</option>
                        </select>
                    </div>

                    <!-- Botón -->
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary w-100">Agregar / Actualizar Vuelo</button>
                    </div>
                </div>
            </form>
        </div>


        <div class="table-container">
            <h2>Listado de Vuelos</h2>
            <table>
                <thead>
                    <tr>
                        <th>Número</th>
                        <th>Origen</th>
                        <th>Destino</th>
                        <th>Salida</th>
                        <th>Llegada</th>
                        <th>Aerolínea</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="tablaVuelos"></tbody>
            </table>
        </div>
    </main>

    <footer>
        <p>Sistema de Gestión de Vuelos &copy; 2023 - SistemaAéreo</p>
        <p>Versión 1.0.0</p>
    </footer>

    <script>
        //empieza el java
        const vuelos = [];
        const form = document.getElementById('formVuelo');
        const tabla = document.getElementById('tablaVuelos');
        const indexEditar = document.getElementById('indexEditar');

        function Tabla() {
            tabla.innerHTML = '';
            vuelos.forEach((v, i) => {
                tabla.innerHTML += `
                    <tr>
                        <td>${v.numero}</td>
                        <td>${v.origen}</td>
                        <td>${v.destino}</td>
                        <td>${v.fechaSalida} ${v.horaSalida}</td>
                        <td>${v.fechaLlegada} ${v.horaLlegada}</td>
                        <td>${v.aerolinea}</td>
                        <td>${v.estado}</td>
                        <td>
                            <button onclick="editar(${i})">Editar</button>
                            <button onclick="eliminar(${i})">Eliminar</button>
                        </td>
                    </tr>`;
            });
        }

        form.addEventListener('submit', e => {
            e.preventDefault();

            const vuelo = {
                numero: document.getElementById('numero').value,
                origen: document.getElementById('origen').value,
                destino: document.getElementById('destino').value,
                fechaSalida: document.getElementById('fechaSalida').value,
                horaSalida: document.getElementById('horaSalida').value,
                fechaLlegada: document.getElementById('fechaLlegada').value,
                horaLlegada: document.getElementById('horaLlegada').value,
                aerolinea: document.getElementById('aerolinea').value,
                estado: document.getElementById('estado').value
            };

            if (indexEditar.value === '') {
                vuelos.push(vuelo);
            } else {
                vuelos[indexEditar.value] = vuelo;
                indexEditar.value = '';
            }

            form.reset();
            Tabla();
        });

        function editar(i) {
            const v = vuelos[i];
            document.getElementById('numero').value = v.numero;
            document.getElementById('origen').value = v.origen;
            document.getElementById('destino').value = v.destino;
            document.getElementById('fechaSalida').value = v.fechaSalida;
            document.getElementById('horaSalida').value = v.horaSalida;
            document.getElementById('fechaLlegada').value = v.fechaLlegada;
            document.getElementById('horaLlegada').value = v.horaLlegada;
            document.getElementById('aerolinea').value = v.aerolinea;
            document.getElementById('estado').value = v.estado;
            indexEditar.value = i;
        }

        function eliminar(i) {
            if (confirm('¿Eliminar este vuelo?')) {
                vuelos.splice(i, 1);
                Tabla();
            }
        }

        Tabla();
    </script>
</body>
</html>